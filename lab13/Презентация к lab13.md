# Презентация к лабораторной работе №13

----

# Тема:
## Программирование в командном процессоре ОС UNIX. Расширенное программирование.

----

## Российский Университет Дружбы Народов

### Факультет Физико-Математических и Естественных Наук

*Дисциплина: Операционные системы*

Студент: Мухамедияр Адиль

Группа: НКНбд-01-20

Москва, 2021г.

----

### Цель работы

Изучить основы программирования в оболочке ОС UNIX. Научиться писать более сложные командные файлы с использованием логических управляющих конструкций и циклов.

----

### Введение

Командные процессоры или оболочки – это программы, позволяющие пользователю взаимодействовать с компьютером. Их можно рассматривать как настоящие интерпретируемые языки, которые воспринимают команды пользователя и обрабатывают их. Поэтому командные процессоры также называют интерпретаторами команд. На языках оболочек можно писать программы и выполнять их подобно любым другим программам. UNIX обладает большим количеством оболочек.

##### Командные файлы и функции

* Последовательность команд может быть помещена в текстовый файл. Такой файл называется командным. Далее этот файл можно выполнить по команде *bash командный_файл [аргументы]*. 

* Чтобы не вводить каждый раз последовательности символов *bash*, необходимо изменить код защиты этого командного файла, обеспечив доступ к этому файлу по выполнению. Это может быть сделано с помощью команды *chmod +x имя_файла*. 

* Теперь можно вызывать свой командный файл на выполнение просто, вводя его имя с терминала так, как будто он является выполняемой программой. Командный процессор распознает, что в Вашем файле на самом деле хранится не выполняемая программа, а программа, написанная на языке программирования оболочки, и осуществит ее интерпретацию. Группу команд можно объединить в функцию.

----

### Ход работы:

1. Создал текстовый файл с расширением *.sh*, после командой *chmod* разрешил выполнения файла.

![1_1.img](https://github.com/adil-cpu/OS_/blob/main/lab13/img/1_1.PNG?raw=true)

* Написал командный файл, реализующий упрощённый механизм семафоров. Командный файл ждет в течение некоторого времени *t1*, до освобождения ресурса, выдавая об этом сообщение, а дождавшись его освобождения, использовал его в течение некоторого времени *t2<>t1*, также выдавая информацию о том, что ресурс используется соответствующим командным файлом (процессом). 

![1_2.img](https://github.com/adil-cpu/OS_/blob/main/lab13/img/1_2.PNG?raw=true)

* Запустил командный файл в одном виртуальном терминале в фоновом режиме, перенаправив его вывод в другой (> /dev/tty#, где # — номер терминала куда перенаправляется вывод), в котором также запущен этот файл, но не в фоновом, а в привилегированном режиме. Доработал программу так, чтобы имелась возможность взаимодействия трёх и более процессов.

![1_3.img](https://github.com/adil-cpu/OS_/blob/main/lab13/img/1_3.PNG?raw=true)

2. Создал текстовый файл с расширением *.sh*, после командой *chmod* разрешил выполнения файла.

![2_1.img](https://github.com/adil-cpu/OS_/blob/main/lab13/img/2_1.PNG?raw=true)

* Реализовал команду *man* с помощью командного файла. Изучил содержимое каталога */usr/share/man/man1*. В нем находятся архивы текстовых файлов, содержащих справку по большинству установленных в системе программ и команд. 

![2_2.img](https://github.com/adil-cpu/OS_/blob/main/lab13/img/2_2.PNG?raw=true)

* Запустил командный файл. Командный файл получает в виде аргумента командной строки название команды и в виде результата выдавает справку об этой команде или сообщение об отсутствии справки, если соответствующего файла нет в каталоге man1.

![2_3.img](https://github.com/adil-cpu/OS_/blob/main/lab13/img/2_4.PNG?raw=true)

* Каждый архив можно открыть командой *less* сразу же просмотрев содержимое справки. 

![2_4.img](https://github.com/adil-cpu/OS_/blob/main/lab13/img/2_3.PNG?raw=true)

3. Создал текстовый файл с расширением *.sh*, после командой *chmod* разрешил выполнения файла.

![3_1.img](https://github.com/adil-cpu/OS_/blob/main/lab13/img/3_1.PNG?raw=true)

* Используя встроенную переменную *$RANDOM*, написал командный файл, генерирующий случайную последовательность букв латинского алфавита. Учел, что *RANDOM* выдаёт псевдослучайные числа в диапазоне от 0 до 32767.

![3_2.img](https://github.com/adil-cpu/OS_/blob/main/lab13/img/3_2.PNG?raw=true)

* Запустил командный файл. Как видим, вывел рандомные 10 слов, состоящих из рандомных букв латинского алфавита.

![3_3.img](https://github.com/adil-cpu/OS_/blob/main/lab13/img/3_3.PNG?raw=true)

----

### Вывод

Изучил основы программирования в оболочке ОС UNIX, научился писать более сложные командные файлы с использованием логических управляющих конструкций и циклов.

----

### Библиография

[Командные процессоры (оболочки)](https://infopedia.su/24x10498.html)

[Операционные системы вычислительных машин](http://bourabai.ru/os/shells.htm)

----
